import{f as h,h as w,i as b,A as l,n as i,R as n,p as d,j as y,c as p,a,k as v,l as m,v as u,u as r,t as A,m as k,o as g,_ as E}from"./DHe4-ZUZ.js";import{a as x}from"./MNsQ0NJ5.js";const z={class:"admin-login__field"},I={class:"admin-login__field"},P={key:0,class:"admin-login__error"},S=h({__name:"login",setup(L){const o=w({isAuthorized:!1,login:"",password:"",error:{isError:!1,message:""}});b(async()=>{try{const{isAdmin:s}=await l.checkAccess();s&&i(n.adminPanel.path)}catch(s){console.error(d(s))}}),y(()=>o.isAuthorized,async s=>{if(s)try{const e=await l.checkAccess(),{isAdmin:t}=e;t?i(n.adminPanel.path):i(n.root.path)}catch(e){i(n.root.path),console.error(d(e))}});const _=async()=>{const{login:s,password:e}=o;try{await l.login({login:s,password:e}),o.isAuthorized=!0}catch(t){const f=d(t);o.error.isError=!0,o.error.message=f}},c={title:"Login",description:"Login - Admin Panel"};return x({title:c.title,description:c.description,robots:"noindex, nofollow",ogImage:"/media/meta/meta.png"}),(s,e)=>(g(),p("form",{class:"admin-login",onSubmit:k(_,["prevent"])},[a("label",z,[m(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r(o).login=t),required:"",name:"admin-login",placeholder:"Login",class:"input login__input"},null,512),[[u,r(o).login,void 0,{lazy:!0,trim:!0}]])]),a("label",I,[m(a("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>r(o).password=t),required:"",name:"password",placeholder:"Password",class:"input login__input",type:"password"},null,512),[[u,r(o).password,void 0,{lazy:!0,trim:!0}]])]),r(o).error.isError?(g(),p("div",P,A(r(o).error.message),1)):v("",!0),e[2]||(e[2]=a("button",{type:"submit",class:"btn btn--big login__btn"}," LOGIN ",-1))],32))}}),V=E(S,[["__scopeId","data-v-8cbff483"]]);export{V as default};
